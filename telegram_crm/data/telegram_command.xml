<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

    <record model="telegram.command" id="help_command">
        <field name="name">/pipeline</field>
        <field name="description">Returns Pipeline</field>
        <field name="type">regular</field>
        <field name="universal">False</field>
        <field name="menu_id" ref="crm.crm_opportunity_report_menu"/>
        <field name="group_ids" eval="[(4, ref('base.group_sale_salesman'))]" />
        <field name="response_code">
graph_data = command.get_graph_data()
data['filters'] = graph_data['filters']
bar_chart = pygal.StackedBar(title="Pipeline", x_labels=map(str, graph_data['x_labels']))

for d_value, d in graph_data['data_lines'].items():
    bar_chart.add(d_value or 'Undefined', d['values'])

charts.append(bar_chart)
        </field>
        <field name="response_template" type="xml">
            <t>Pipeline<t t-foreach="data['filters']" t-as="f"> [x] <t t-esc="f['name']"/></t></t>
        </field>
    </record>

</data>
</openerp>
